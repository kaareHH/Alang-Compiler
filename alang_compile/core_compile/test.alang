import std.alang; # finder lolleren.alang i mappen 

function setup -> | void
    pin bedroomLight = 12;
    pin kitchenLight = 11;
    pin livingRoomLight = 13;
    pin coffeMachine = 10;
    bool IsMorning = false;
    bool IsNoon = false;
    bool IsEvening = false;
    bool IsNight = false;
endfunction




function loop -> | void
    everyHour ->;

   # Define when each state is reached during the day
   if TIME >= 07:45 && TIME < 12:00 then
      IsMorning = true;
   else if TIME >= 12:00 && TIME < 16:00 then
      IsNoon = true;
   else if TIME >= 16:00 && TIME < 22:00 then
      IsEvening = true;
   else
      IsNight = true;
   endif

   # Begin my morning routine at 07:00.
   if TIME == 07:00 then
      MorningRoutine ->;
   endif

   # Make sure all light is turned off when Im at work
   if IsNoon || IsNight then
      OFF -> bedroomLight;
      OFF -> kitchenLight;
      OFF -> livingRoomLight;
   endif
endfunction

function MorningRoutine ->| void
      ON -> coffeMachine;
    
      if TIME >= 07:30 then
            TOOGLE -> bedroomLight; 
            WAIT -> 00:00:10;
      endif
endfunction

time TimePassed = 00:00;
function everyHour ->| void
    if TimePassed < 01:00 then
        TimePassed += TIME % 01:00;
    else
        # kør noget kode
        TimePassed = 00:00;
    endif
endfunction 